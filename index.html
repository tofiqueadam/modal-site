<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrollable Modal with Fixed Close Button</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }

        .modal-container {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .modal-container.show {
            opacity: 1;
        }

        .modal-content {
            background-color: #fefefe;
            margin: 2% auto 5% auto;
            padding: 0;
            border: 1px solid #888;
            width: 80%;
            max-width: 90%;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            max-height: 90vh;
            position: relative;
            overflow: hidden;
        }

        .modal-header {
            position: sticky;
            top: 0;
            background-color: #fefefe;
            z-index: 1;
            padding: 3px 20px;
            border-bottom: 1px solid #ddd;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header.hidden {
            display: none; /* Instantly hide the header */
        }

        .description-content-wrapper {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .description {
            width: 30%;
            padding: 20px;
            border-right: 1px solid #ddd;
            background-color: #f9f9f9;
            box-sizing: border-box;
            overflow-y: auto;
            max-height: 100%;
        }

        .content {
            width: 70%;
            padding: 20px;
            overflow-y: auto;
            box-sizing: border-box;
        }

        .close {
            color: white;
            background-color: rgb(202, 200, 200); /* Grey background */
            border-radius: 50%; /* Make it a circle */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            z-index: 3;
            position: absolute;
            right: 10px;
            top: 10px;
            width: 30px; /* Fixed width */
            height: 30px; /* Fixed height */
            border: none;
        }
       
        .open-modal {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            margin: 5px; /* Add some space between buttons */
        }

        @media (max-width: 800px) {
            .modal-header { 
                position: sticky;
                top: 0; 
                z-index: 1; 
            }
        
            
            .modal-content {
                flex-direction: column;
            }
            .description-content-wrapper {
                flex-direction: column;
                overflow-y: auto;
            }
            .description {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #ddd;
                max-height: none;
                overflow-y: visible;
            }
            .content {
                width: 100%;
                overflow-y: visible;
            }
        }
    </style>
</head>
<body>

    <button class="open-modal" onclick="openModal('modal1')">Open Modal 1</button>
    <button class="open-modal" onclick="openModal('modal2')">Open Modal 2</button>

    <!-- Modal 1 -->
    <div id="modal1" class="modal-container">
        <div class="modal-content">
            <div class="modal-header visible" id="modalHeader1">
                <h1>Modal 1 Title</h1>
            </div>
            <span class="close" onclick="closeModal('modal1')">&times;</span>
            <div class="description-content-wrapper">
                <div class="description">
                    <h2>Description</h2>
                    <p>This is the description for Modal 1. It provides context for the content. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Maecenas non leo laoreet, tristique nisi id, consequat massa.</p>
                </div>
                <div class="content" id="modalContent1">
                    <div class="long-text">
                        <p>This is a longer text to demonstrate scrolling in Modal 1. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                        <p>More text here to ensure ample content for scrolling. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                        <h2>Example Form</h2>
                        <form>
                            <label for="name1">Name:</label><br>
                            <input type="text" id="name1" name="name"><br><br>
                            <label for="email1">Email:</label><br>
                            <input type="email" id="email1" name="email"><br><br>
                            <textarea rows="4" cols="50" placeholder="Enter your message here"></textarea><br><br>
                            <input type="submit" value="Submit">
                        </form>
                        <p>Even more text to ensure the scrolling works properly. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal 2 -->
    <div id="modal2" class="modal-container">
        <div class="modal-content">
            <div class="modal-header visible" id="modalHeader2">
                <h1>Modal 2 Title</h1>
            </div>
            <span class="close" onclick="closeModal('modal2')">&times;</span>
            <div class="description-content-wrapper">
                <div class="description">
                    <h2>Description</h2>
                    <p>This is the description for Modal 2. It provides context for the content. Aenean euismod bibendum laoreet. Proin gravida dolor sit amet lacus accumsan et viverra justo commodo. Maecenas non leo laoreet, tristique nisi id, consequat massa.</p>
                </div>
                <div class="content" id="modalContent2">
                    <div class="long-text">
                        <p>This is a longer text to demonstrate scrolling in Modal 2. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                        <p>Additional filler text to ensure the modal's scrollable content works correctly. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                        <h2>Example Form</h2>
                        <form>
                            <label for="name2">Name:</label><br>
                            <input type="text" id="name2" name="name"><br><br>
                            <label for="email2">Email:</label><br>
                            <input type="email" id="email2" name="email"><br><br>
                            <textarea rows="4" cols="50" placeholder="Enter your message here"></textarea><br><br>
                            <input type="submit" value="Submit">
                        </form>
                        <p>More text to ensure the scrolling works properly in Modal 2. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
 
        // Function to open the modal
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            const modalHeader = document.getElementById('modalHeader' + modalId.charAt(modalId.length - 1));
            modal.style.display = "block";
            setTimeout(() => {
                modal.classList.add("show");
            }, 0);
            
            // Track scroll direction for hiding header
            let lastScrollTop = 0;
            const content = modal.querySelector('.content');

            content.addEventListener('scroll', function() {
                let scrollTop = content.scrollTop;
                if (scrollTop > lastScrollTop) {
                    modalHeader.classList.add('hidden'); // Hide the header instantly
                } else {
                    modalHeader.classList.remove('hidden'); // Show the header
                }
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
            });
        }

        // Function to close the modal
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove("show");
            setTimeout(() => {
                modal.style.display = "none";
            }, 300);
        }

        // Close the modal if the user clicks outside of the modal content
        window.onclick = function(event) {
            const modal1 = document.getElementById('modal1');
            const modal2 = document.getElementById('modal2');
            if (event.target == modal1) {
                closeModal('modal1');
            } else if (event.target == modal2) {
                closeModal('modal2');
            }
        }
    
    </script>
</body>
</html>